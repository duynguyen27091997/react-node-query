import e from"react";function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var r;!function(e){e.Idle="idle",e.Loading="loading",e.Error="error",e.Success="success"}(r||(r={}));var n=function(){},i=0,u="undefined"==typeof window;function o(){}var c=console||{error:o,warn:o,log:o};function s(e){c=e}function a(e,t){return"function"==typeof e?e(t):e}function f(e,t){if("function"==typeof t)throw new Error("Cannot stringify non JSON value");return v(t)?Object.keys(t).sort().reduce((function(e,r){return e[r]=t[r],e}),{}):t}function h(){return"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}function l(){return void 0===navigator.onLine||navigator.onLine}function d(e){var r,n,i,u;return v(e[0])?(r=e[0].queryKey,n=e[0].queryFn,i=e[0].config,u=e[1]):v(e[1])?(r=e[0],i=e[1],u=e[2]):(r=e[0],n=e[1],i=e[2],u=e[3]),i=i?t({queryKey:r},i):{queryKey:r},n&&(i=t({},i,{queryFn:n})),[r,i,u]}function v(e){return e&&"object"==typeof e&&!Array.isArray(e)}function y(e){if(!g(e))return!1;var t=e.constructor;if(void 0===t)return!0;var r=t.prototype;return!!g(r)&&!!r.hasOwnProperty("isPrototypeOf")}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function p(e){return e instanceof Error}function b(e){return e instanceof n}function m(e){return{status:e,isLoading:e===r.Loading,isSuccess:e===r.Success,isError:e===r.Error,isIdle:e===r.Idle}}function F(e){var t;return function(r){t&&t(),t=r(e)}}var S={queries:{queryKeySerializerFn:function(e){try{var t=Array.isArray(e)?e:[e],r=(n=t,JSON.stringify(n,f));return[r,t=JSON.parse(r)]}catch(e){throw new Error("A valid query key is required!")}var n},enabled:!0,retry:3,retryDelay:function(e){return Math.min(1e3*Math.pow(2,e),3e4)},staleTime:0,cacheTime:3e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,notifyOnStatusChange:!0,structuralSharing:!0}};function q(e,r,n,i){return t({},S.shared,S.queries,null==e?void 0:e.shared,null==e?void 0:e.queries,null==r?void 0:r.shared,null==r?void 0:r.queries,n,i)}function w(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function E(){}var C,T=function(){function e(e){this.config=e,this.queryCache=e.queryCache,this.clear=this.clear.bind(this),this.refetch=this.refetch.bind(this),this.fetchMore=this.fetchMore.bind(this),this.updateQuery()}var r=e.prototype;return r.subscribe=function(e){return this.started=!0,this.updateListener=e,this.currentQuery.subscribeObserver(this),this.optionalFetch(),this.updateTimers(),this.unsubscribe.bind(this)},r.unsubscribe=function(){this.started=!1,this.updateListener=void 0,this.clearTimers(),this.currentQuery.unsubscribeObserver(this)},r.updateConfig=function(e){var t=this.config;this.config=e;var r=this.updateQuery();if(this.started){if(r)return this.optionalFetch(),void this.updateTimers();e.enabled&&!t.enabled&&this.optionalFetch(),e.enabled===t.enabled&&e.staleTime===t.staleTime||this.updateStaleTimeout(),e.enabled===t.enabled&&e.refetchInterval===t.refetchInterval&&e.refetchIntervalInBackground===t.refetchIntervalInBackground||this.updateRefetchInterval()}},r.isStale=function(){return this.currentResult.isStale},r.getCurrentResult=function(){return this.currentResult},r.clear=function(){return this.currentQuery.clear()},r.refetch=function(e){try{return this.currentQuery.refetch(e,this.config)}catch(e){return Promise.reject(e)}},r.fetchMore=function(e,t){try{return this.currentQuery.fetchMore(e,t,this.config)}catch(e){return Promise.reject(e)}},r.fetch=function(){var e=this;return w(function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){return w(e.currentQuery.fetch(void 0,e.config))}),E))},r.optionalFetch=function(){!this.config.enabled||this.config.suspense&&this.currentResult.isFetched||!this.currentResult.isStale||!this.config.refetchOnMount&&1!==this.currentQuery.observers.length||this.fetch()},r.updateIsStale=function(){var e;this.currentQuery.isStaleByTime(this.config.staleTime)!==this.currentResult.isStale&&(this.currentResult=this.createResult(),null==(e=this.updateListener)||e.call(this,this.currentResult))},r.updateStaleTimeout=function(){var e=this;if(!u){this.clearStaleTimeout();var t=this.config.staleTime||0,r=this.currentResult,n=r.isStale,i=r.updatedAt;if(!n&&t!==1/0){var o=t-(Date.now()-i),c=Math.max(o,0);this.staleTimeoutId=setTimeout((function(){e.updateIsStale()}),c)}}},r.updateRefetchInterval=function(){var e=this;u||(this.clearRefetchInterval(),!this.config.enabled||!this.config.refetchInterval||this.config.refetchInterval<0||this.config.refetchInterval===1/0||(this.refetchIntervalId=setInterval((function(){(e.config.refetchIntervalInBackground||h())&&e.fetch()}),this.config.refetchInterval)))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval()},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearInterval(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(){var e=this.currentQuery,r=this.currentResult,n=this.previousResult,i=this.config,u=e.state,o=u.data,c=u.status,s=u.updatedAt;i.keepPreviousData&&u.isLoading&&(null==n?void 0:n.isSuccess)&&(o=n.data,s=n.updatedAt,c=n.status);var a=!1;return a=r||e.state.isFetched?e.isStaleByTime(i.staleTime):"function"==typeof i.initialStale?i.initialStale():"boolean"==typeof i.initialStale?i.initialStale:void 0===e.state.data,t({},m(c),{canFetchMore:u.canFetchMore,clear:this.clear,data:o,error:u.error,failureCount:u.failureCount,fetchMore:this.fetchMore,isFetched:u.isFetched,isFetching:u.isFetching,isFetchingMore:u.isFetchingMore,isStale:a,query:e,refetch:this.refetch,updatedAt:s})},r.updateQuery=function(){var e=this.currentQuery,r=this.config.keepPreviousData&&e?t({},this.config,{initialData:void 0}):this.config,n=this.queryCache.buildQuery(r.queryKey,r);return n!==e&&(this.previousResult=this.currentResult,this.currentQuery=n,this.currentResult=this.createResult(),this.started&&(null==e||e.unsubscribeObserver(this),this.currentQuery.subscribeObserver(this)),!0)},r.onQueryUpdate=function(e,t){var r=this.config,n=this.currentResult;this.currentResult=this.createResult();var i,u=this.currentResult;("Success"===t.type&&u.isSuccess?(null==r.onSuccess||r.onSuccess(u.data),null==r.onSettled||r.onSettled(u.data,null),this.updateTimers()):"Error"===t.type&&u.isError&&(null==r.onError||r.onError(u.error),null==r.onSettled||r.onSettled(void 0,u.error),this.updateTimers()),u.data!==n.data||u.error!==n.error||r.notifyOnStatusChange)&&(null==(i=this.updateListener)||i.call(this,u))},e}();function R(){}function I(e,t){if(!t)return e&&e.then?e.then(R):Promise.resolve()}function Q(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function L(e){if(e&&e.then)return e.then(R)}function O(e,t){var r=e();return r&&r.then?r.then(t):t(r)}function M(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function P(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}!function(e){e.Failed="Failed",e.Fetch="Fetch",e.Success="Success",e.Error="Error"}(C||(C={}));var D=function(){function e(e){var n,i,u;this.config=e.config,this.queryCache=e.queryCache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.notifyGlobalListeners=e.notifyGlobalListeners,this.observers=[],this.state=(n=e.config,i="function"==typeof n.initialData?n.initialData():n.initialData,t({},m(u=void 0!==i?r.Success:n.enabled?r.Loading:r.Idle),{error:null,isFetched:!1,isFetching:u===r.Loading,isFetchingMore:!1,failureCount:0,data:i,updatedAt:Date.now(),canFetchMore:A(n,i)})),this.cacheTime=e.config.cacheTime,this.scheduleGc()}var i=e.prototype;return i.updateConfig=function(e){this.config=e,this.cacheTime=Math.max(this.cacheTime,e.cacheTime||0)},i.dispatch=function(e){var n=this;this.state=function(e,n){switch(n.type){case C.Failed:return t({},e,{failureCount:e.failureCount+1});case C.Fetch:var i=void 0!==e.data?r.Success:r.Loading;return t({},e,m(i),{isFetching:!0,isFetchingMore:n.isFetchingMore||!1,failureCount:0});case C.Success:return t({},e,m(r.Success),{data:n.data,error:null,isFetched:!0,isFetching:!1,isFetchingMore:!1,canFetchMore:n.canFetchMore,updatedAt:Date.now(),failureCount:0});case C.Error:return t({},e,m(r.Error),{error:n.error,isFetched:!0,isFetching:!1,isFetchingMore:!1,failureCount:e.failureCount+1,throwInErrorBoundary:!0});default:return e}}(this.state,e),this.observers.forEach((function(t){t.onQueryUpdate(n.state,e)})),this.notifyGlobalListeners(this)},i.scheduleGc=function(){var e=this;u||(this.clearGcTimeout(),this.cacheTime===1/0||this.observers.length>0||(this.gcTimeout=setTimeout((function(){e.clear()}),this.cacheTime)))},i.cancel=function(){var e;null==(e=this.cancelFetch)||e.call(this)},i.continue=function(){var e;null==(e=this.continueFetch)||e.call(this)},i.clearTimersObservers=function(){this.observers.forEach((function(e){e.clearTimers()}))},i.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},i.setData=function(e){var t,r,n=this.state.data,i=a(e,n);this.config.structuralSharing&&(i=function e(t,r){if(t===r)return t;var n=Array.isArray(t)&&Array.isArray(r);if(n||y(t)&&y(r)){for(var i=n?t.length:Object.keys(t).length,u=n?r:Object.keys(r),o=u.length,c=n?[]:{},s=0,a=0;a<o;a++){var f=n?a:u[a];c[f]=e(t[f],r[f]),c[f]===t[f]&&s++}return i===o&&s===i?t:c}return r}(n,i)),(null==(t=(r=this.config).isDataEqual)?void 0:t.call(r,n,i))&&(i=n);var u=A(this.config,i);this.dispatch({type:C.Success,data:i,canFetchMore:u})},i.clear=function(){this.queryCache.removeQuery(this)},i.destroy=function(){this.clearGcTimeout(),this.clearTimersObservers(),this.cancel()},i.isEnabled=function(){return this.observers.some((function(e){return e.config.enabled}))},i.isStale=function(){return this.observers.some((function(e){return e.isStale()}))},i.isStaleByTime=function(e){return void 0===e&&(e=0),!this.state.isSuccess||this.state.updatedAt+e<=Date.now()},i.onWindowFocus=function(){try{var e=this;return O((function(){if(e.observers.some((function(e){return e.isStale()&&e.config.enabled&&e.config.refetchOnWindowFocus})))return L(Q((function(){return I(e.fetch())}),R))}),(function(){e.continue()}))}catch(e){return Promise.reject(e)}},i.onOnline=function(){try{var e=this;return O((function(){if(e.observers.some((function(e){return e.isStale()&&e.config.enabled&&e.config.refetchOnReconnect})))return L(Q((function(){return I(e.fetch())}),R))}),(function(){e.continue()}))}catch(e){return Promise.reject(e)}},i.subscribe=function(e){var r=new T(t({queryCache:this.queryCache,queryKey:this.queryKey},this.config));return r.subscribe(e),r},i.subscribeObserver=function(e){this.observers.push(e),this.clearGcTimeout()},i.unsubscribeObserver=function(e){this.observers=this.observers.filter((function(t){return t!==e})),this.observers.length||this.isTransportCancelable&&this.cancel(),this.scheduleGc()},i.refetch=function(e,t){try{var r=this;return Q((function(){return M(r.fetch(void 0,t))}),(function(t){if(!0===(null==e?void 0:e.throwOnError))throw t}))}catch(e){return Promise.reject(e)}},i.fetchMore=function(e,t,r){try{return this.fetch({fetchMore:{fetchMoreVariable:e,previous:(null==t?void 0:t.previous)||!1}},r)}catch(e){return Promise.reject(e)}},i.fetch=function(e,t){try{var r=this;if(r.promise)return r.promise;if(t&&r.updateConfig(t),"function"!=typeof(t=r.config).queryFn)return;var n=t.queryFnParamsFilter,i=n?n(r.queryKey):r.queryKey;return r.promise=P((function(){return Q((function(){var n;return O((function(){return t.infinite?M(r.startInfiniteFetch(t,i,e),(function(e){n=e})):M(r.startFetch(t,i,e),(function(e){n=e}))}),(function(){return r.setData(n),delete r.promise,n}))}),(function(e){throw r.dispatch({type:C.Error,error:e}),b(e)||c.error(e),delete r.promise,e}))}))(),r.promise}catch(e){return Promise.reject(e)}},i.startFetch=function(e,t,r){try{return this.state.isFetching||this.dispatch({type:C.Fetch}),this.tryFetchData(e,(function(){return e.queryFn.apply(void 0,t)}))}catch(e){return Promise.reject(e)}},i.startInfiniteFetch=function(e,t,r){try{var n=null==r?void 0:r.fetchMore,i=n||{},u=i.previous,o=i.fetchMoreVariable,c=!!n&&(u?"previous":"next"),s=this.state.data||[],a=P((function(r,n,i){var u=j(r,n);return void 0===i&&void 0!==u&&e.getFetchMore&&(i=e.getFetchMore(u,r)),M(e.queryFn.apply(void 0,t.concat([i])),(function(e){return n?[e].concat(r):[].concat(r,[e])}))}));return this.state.isFetching||this.dispatch({type:C.Fetch,isFetchingMore:c}),this.tryFetchData(e,(function(){if(c)return a(s,u,o);if(s.length){for(var e=a([]),t=1;t<s.length;t++)e=e.then(a);return e}return a([])}))}catch(e){return Promise.reject(e)}},i.tryFetchData=function(e,t){try{var r=this;return new Promise((function(i,u){var o,c,s=!1,f=function(){s=!0,delete r.cancelFetch,delete r.continueFetch,delete r.isTransportCancelable,null==o||o()},d=function(e){f(),u(e)};r.cancelFetch=function(){d(new n);try{null==c||c()}catch(e){}},r.continueFetch=function(){null==o||o()};var v=P((function(){return Q((function(){var e,n=t();return"function"==typeof(null==(e=n)?void 0:e.cancel)&&(c=function(){n.cancel()},r.isTransportCancelable=!0),M(n,(function(e){!function(e){f(),i(e)}(e)}))}),(function(t){if(!s){var n,i=r.state.failureCount,u=e.retry,c=e.retryDelay;if(!0===u||i<u||"function"==typeof u&&u(i,t))return r.dispatch({type:C.Failed}),M((n=a(c,i)||0,new Promise((function(e){setTimeout(e,n)}))),(function(){return O((function(){if(!h()||!l())return I(new Promise((function(e){o=e})))}),(function(){s||v()}))}));d(t)}}))}));v()}))}catch(e){return Promise.reject(e)}},e}();function j(e,t){return t?e[0]:e[e.length-1]}function A(e,t,r){if(e.infinite&&e.getFetchMore&&Array.isArray(t))return Boolean(e.getFetchMore(j(t,r),t))}function k(){}function G(e,t){if(!t)return e&&e.then?e.then(k):Promise.resolve()}function K(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function B(e,t){var r=e();return r&&r.then?r.then(t):t(r)}var x=function(){function e(e){this.config=e||{},this.globalListeners=[],this.queries={},this.queriesArray=[],this.isFetching=0}var r=e.prototype;return r.notifyGlobalListeners=function(e){var t=this;this.isFetching=this.getQueries().reduce((function(e,t){return t.state.isFetching?e+1:e}),0),this.globalListeners.forEach((function(r){r(t,e)}))},r.getDefaultConfig=function(){return this.config.defaultConfig},r.getDefaultedQueryConfig=function(e){return q(this.getDefaultConfig(),void 0,e,{queryCache:this})},r.subscribe=function(e){var t=this;return this.globalListeners.push(e),function(){t.globalListeners=t.globalListeners.filter((function(t){return t!==e}))}},r.clear=function(e){this.removeQueries(),(null==e?void 0:e.notify)&&this.notifyGlobalListeners()},r.getQueries=function(e,t){if(!0===e||void 0===e)return this.queriesArray;var r;if("function"==typeof e)r=e;else{var n=this.getDefaultedQueryConfig().queryKeySerializerFn(e),i=n[0],u=n[1];r=function(e){return(null==t?void 0:t.exact)?e.queryHash===i:function e(t,r){return t===r||typeof t==typeof r&&("object"==typeof t&&!Object.keys(r).some((function(n){return!e(t[n],r[n])})))}(e.queryKey,u)}}return this.queriesArray.filter(r)},r.getQuery=function(e){return this.getQueries(e,{exact:!0})[0]},r.getQueryData=function(e){var t;return null==(t=this.getQuery(e))?void 0:t.state.data},r.removeQuery=function(e){this.queries[e.queryHash]&&(e.destroy(),delete this.queries[e.queryHash],this.queriesArray=this.queriesArray.filter((function(t){return t!==e})),this.notifyGlobalListeners(e))},r.removeQueries=function(e,t){var r=this;this.getQueries(e,t).forEach((function(e){r.removeQuery(e)}))},r.cancelQueries=function(e,t){this.getQueries(e,t).forEach((function(e){e.cancel()}))},r.invalidateQueries=function(e,t){try{var r=this,n=t||{},i=n.refetchActive,u=void 0===i||i,o=n.refetchInactive,c=void 0!==o&&o,s=n.throwOnError;return K((function(){return G(Promise.all(r.getQueries(e,t).map((function(e){var t=e.isEnabled();if(t&&u||!t&&c)return e.fetch()}))))}),(function(e){if(s)throw e}))}catch(e){return Promise.reject(e)}},r.resetErrorBoundaries=function(){this.getQueries().forEach((function(e){e.state.throwInErrorBoundary=!1}))},r.buildQuery=function(e,t){var r=this,n=this.getDefaultedQueryConfig(t),i=n.queryKeySerializerFn(e),u=i[0],o=i[1];if(this.queries[u])return this.queries[u];var c=new D({queryCache:this,queryKey:o,queryHash:u,config:n,notifyGlobalListeners:function(e){r.notifyGlobalListeners(e)}});return this.config.frozen||(this.queries[u]=c,this.queriesArray.push(c),this.notifyGlobalListeners(c)),c},r.prefetchQuery=function(){try{for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];v(n[1])&&(n[1].hasOwnProperty("throwOnError")||n[1].hasOwnProperty("force"))&&(n[3]=n[1],n[1]=void 0,n[2]=void 0);var u,o=d(n),c=o[0],s=o[1],a=o[2],f=e.getDefaultedQueryConfig(t({retry:!1},s));return K((function(){return u=e.buildQuery(c,f),B((function(){if((null==a?void 0:a.force)||u.isStaleByTime(s.staleTime))return G(u.fetch(void 0,f))}),(function(){return u.state.data}))}),(function(e){if(null==a?void 0:a.throwOnError)throw e}))}catch(e){return Promise.reject(e)}},r.setQueryData=function(e,r,n){var i=this.getQuery(e);i?i.setData(r):this.buildQuery(e,t({initialStale:void 0===(null==n?void 0:n.staleTime),initialData:a(r,void 0)},n))},e}(),H=W({frozen:u}),z=[H];function W(e){return new x(e)}function J(e){h()&&l()&&z.forEach((function(t){t.getQueries().forEach((function(t){e?t.onOnline():t.onWindowFocus()}))}))}var N=F((function(){return J(!1)}));N((function(e){var t;if(!u&&(null==(t=window)?void 0:t.addEventListener))return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),function(){window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}));var U=F((function(){return J(!0)}));U((function(e){var t;if(!u&&(null==(t=window)?void 0:t.addEventListener))return window.addEventListener("online",e,!1),function(){window.removeEventListener("online",e)}}));var V=e.createContext(H),X=function(){return e.useContext(V)},Y=function(t){var r=t.queryCache,n=t.children,i=e.useMemo((function(){return r||W()}),[r]);return e.useEffect((function(){return z.push(i),function(){var e=z.indexOf(i);e>-1&&z.splice(e,1),null==r&&i.clear({notify:!1})}}),[i,r]),e.createElement(V.Provider,{value:i},n)},Z=e.createContext(void 0);function $(){return e.useContext(Z)}var _,ee=function(r){var n=r.config,i=r.children,u=$(),o=e.useMemo((function(){return u?(r=n,{shared:t({},(e=u).shared,r.shared),queries:t({},e.queries,r.queries),mutations:t({},e.mutations,r.mutations)}):n;var e,r}),[n,u]);return e.createElement(Z.Provider,{value:o},i)};function te(t){var r=e.useRef(t);return r.current=t,e.useCallback((function(){return r.current}),[])}function re(){var t=e.useRef(!1),r=e.useCallback((function(){return t.current}),[]);return e[u?"useEffect":"useLayoutEffect"]((function(){return t.current=!0,function(){t.current=!1}}),[]),r}function ne(t){var r=re(),n=e.useState(t),i=n[0],u=n[1];return[i,e.useCallback((function(e){var t;t=function(){r()&&u(e)},Promise.resolve().then(t).catch((function(e){return setTimeout((function(){throw e}))}))}),[r])]}function ie(){var t=X(),r=ne(t.isFetching),n=r[0],i=r[1];return e.useEffect((function(){return t.subscribe((function(){i(t.isFetching)}))}),[t,i]),n}function ue(e){var r=$(),n=X(),i=(null==e?void 0:e.queryCache)||n;return function(e,r,n,i){return t({},S.shared,S.mutations,null==e?void 0:e.shared,null==e?void 0:e.mutations,null==r?void 0:r.shared,null==r?void 0:r.mutations,n,i)}(i.getDefaultConfig(),r,e,{queryCache:i})}function oe(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}!function(e){e.Reset="Reset",e.Loading="Loading",e.Resolve="Resolve",e.Reject="Reject"}(_||(_={}));var ce=function(){return t({},m(r.Idle),{data:void 0,error:null})};function se(e,n){switch(n.type){case _.Reset:return ce();case _.Loading:return t({},m(r.Loading),{data:void 0,error:null});case _.Resolve:return t({},m(r.Success),{data:n.data,error:null});case _.Reject:return t({},m(r.Error),{data:void 0,error:n.error});default:return e}}function ae(r,n){void 0===n&&(n={});var u,o,s,a=te(n=ue(n)),f=e.useReducer(se,null,ce),h=f[0],l=f[1],d=(u=l,o=re(),e.useCallback((function(){if(o())return u.apply(void 0,arguments)}),[u,o])),v=te(r),y=e.useRef(),g=e.useCallback((s=function(e,t){void 0===t&&(t={});var r=a(),n=i++;y.current=n;var u,o=function(){return y.current===n};return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){return d({type:_.Loading}),oe(null==r.onMutate?void 0:r.onMutate(e),(function(n){return u=n,oe(v()(e),(function(n){return o()&&d({type:_.Resolve,data:n}),oe(null==r.onSuccess?void 0:r.onSuccess(n,e),(function(){return oe(null==t.onSuccess?void 0:t.onSuccess(n,e),(function(){return oe(null==r.onSettled?void 0:r.onSettled(n,null,e),(function(){return oe(null==t.onSettled?void 0:t.onSettled(n,null,e),(function(){return n}))}))}))}))}))}))}),(function(n){return c.error(n),oe(null==r.onError?void 0:r.onError(n,e,u),(function(){return oe(null==t.onError?void 0:t.onError(n,e,u),(function(){return oe(null==r.onSettled?void 0:r.onSettled(void 0,n,e,u),(function(){return oe(null==t.onSettled?void 0:t.onSettled(void 0,n,e,u),(function(){var e;if(o()&&d({type:_.Reject,error:n}),null!=(e=t.throwOnError)?e:r.throwOnError)throw n}))}))}))}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(s.apply(this,e))}catch(e){return Promise.reject(e)}}),[d,a,v]),p=e.useCallback((function(){d({type:_.Reset})}),[d]);return e.useEffect((function(){var e=a(),t=e.suspense,r=e.useErrorBoundary;if((null!=r?r:t)&&h.error)throw h.error}),[a,h.error]),[g,t({},h,{reset:p})]}function fe(t){void 0===t&&(t={}),t=function(e){var t=$(),r=X(),n=(null==e?void 0:e.queryCache)||r;return q(n.getDefaultConfig(),t,e,{queryCache:n})}(t);var r,n=(r=ne({})[1],e.useCallback((function(){return r({})}),[r])),i=e.useRef(),u=!i.current,o=i.current||new T(t);i.current=o,e.useEffect((function(){return o.subscribe((function(){n()}))}),[o,n]),u||o.updateConfig(t);var c=o.getCurrentResult();if(t.suspense||t.useErrorBoundary){if(c.isError&&c.query.state.throwInErrorBoundary)throw c.error;if(t.enabled&&t.suspense&&!c.isSuccess){var s=o.subscribe();throw o.fetch().finally(s)}}return c}function he(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=d(t)[1];return fe(n)}function le(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=d(r)[1],u=fe(t({},i,{keepPreviousData:!0}));return t({},u,{resolvedData:u.data,latestData:u.query.state.data===u.data?u.data:void 0})}function de(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=d(r)[1];return fe(t({},i,{infinite:!0}))}export{n as CancelledError,r as QueryStatus,Y as ReactQueryCacheProvider,ee as ReactQueryConfigProvider,b as isCancelledError,p as isError,W as makeQueryCache,H as queryCache,z as queryCaches,s as setConsole,N as setFocusHandler,U as setOnlineHandler,de as useInfiniteQuery,ie as useIsFetching,ae as useMutation,le as usePaginatedQuery,he as useQuery,X as useQueryCache};
//# sourceMappingURL=react-query.min.mjs.map
